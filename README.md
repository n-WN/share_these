# ğŸ“‚ Share_These

## ğŸ“ ç®€ä»‹

åˆ†äº«å½“å‰ç›®å½•(åŒ…æ‹¬å­ç›®å½•)ä¸‹çš„æ‰€æœ‰æ–‡ä»¶

> ç”±ç¨‹åºå‘˜è§†è§’

share these files in current directory (including subdirectories)

> from the perspective of a programmer

<img width="1218" alt="demo" src="https://github.com/user-attachments/assets/ddf6cb04-d998-4888-b30c-e474f5aacc70" />

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ **å¿«é€Ÿéƒ¨ç½²**ï¼šæ— éœ€é…ç½®ï¼Œç›´æ¥è¿è¡Œ
- ğŸ”„ **å®æ—¶è®¿é—®**ï¼šç›´æ¥è®¿é—®å·¥ä½œç›®å½•æ–‡ä»¶ï¼Œæ— éœ€é¢„å…ˆä¸Šä¼ 
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒç”µè„‘å’Œç§»åŠ¨è®¾å¤‡
- ğŸŒ“ **æš—è‰²æ¨¡å¼**ï¼šè‡ªåŠ¨é€‚åº”ç³»ç»Ÿè®¾ç½®
- ğŸ“¦ **æ–‡ä»¶ç¼“å­˜**ï¼šå°æ–‡ä»¶ç¼“å­˜æé«˜æ€§èƒ½
- ğŸ”’ **å®‰å…¨ä¿éšœ**ï¼šè·¯å¾„å®‰å…¨æ£€æŸ¥ï¼Œé˜²æ­¢ç›®å½•éå†
- âš¡ **æµå¼ä¼ è¾“**ï¼šé«˜æ•ˆå¤„ç†å¤§æ–‡ä»¶
- ğŸ“Š **å¹¶å‘æ§åˆ¶**ï¼šé™åˆ¶åŒæ—¶è¿æ¥æ•°ï¼Œä¿éšœç¨³å®šæ€§
- ğŸŒ **ç½‘ç»œé…ç½®**ï¼šå¯å®šåˆ¶ç«¯å£å’Œç»‘å®šåœ°å€

## ğŸ¤” ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªç¨‹åºï¼Ÿ

- ç°å­˜çš„åˆ†äº«APPéœ€è¦æŠŠæ–‡ä»¶æ‹–æ‹½åˆ°APPä¸­ï¼Œæœ‰æ—¶å€™æ–‡ä»¶å¤ªå¤šï¼Œä¼šå¾ˆéº»çƒ¦
- æœ‰æ—¶å€™ï¼Œæˆ‘åªæ˜¯æƒ³åˆ†äº«å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†æ˜¯åˆä¸æƒ³æŠŠæ–‡ä»¶æ‰“åŒ…æˆå‹ç¼©åŒ…
- `python3 -m http.server` ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œä¸é€‚åˆå¤šäººåˆ†äº«ï¼ˆä¸ç¨³å®šï¼‰

## ğŸš€ å®‰è£…

### é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶

```shell
# ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
curl -L https://github.com/n-WN/share_these/releases/latest/download/share_these-linux-amd64 -o share_these
chmod +x share_these
```

### ä»æºç ç¼–è¯‘

```shell
git clone https://github.com/n-WN/share_these.git
cd share_these
cargo build --release
```

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```shell
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x ./share_these

# åŸºæœ¬è¿è¡Œï¼ˆé»˜è®¤ç«¯å£3000ï¼Œæ‰€æœ‰ç½‘å¡ï¼‰
./share_these

# æŒ‡å®šç«¯å£
./share_these --port 8080
./share_these -p 8080

# æŒ‡å®šç»‘å®šåœ°å€
./share_these --host 127.0.0.1
./share_these -h 127.0.0.1

# åŒæ—¶æŒ‡å®šç«¯å£å’Œåœ°å€
./share_these -h 127.0.0.1 -p 8080

# æŸ¥çœ‹å¸®åŠ©
./share_these --help
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--port` | `-p` | æœåŠ¡å™¨ç»‘å®šçš„ç«¯å£ | 3000 |
| `--host` | `-h` | æœåŠ¡å™¨ç»‘å®šçš„ç½‘å¡åœ°å€ | 0.0.0.0 |
| `--help` | | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | |
| `--version` | | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ | |

## ğŸ”§ æŠ€æœ¯ä¾èµ–

```toml
[dependencies]
# é”™è¯¯å¤„ç†
anyhow = "1.0.97"
# å¼‚æ­¥è¿è¡Œæ—¶
tokio = { version = "1.44.1", features = ["full"] }
# Webæ¡†æ¶
axum = { version = "0.8.1" }
# æ—¥å¿—ç³»ç»Ÿ
tracing = "0.1.41"
tracing-subscriber = "0.3.19"
# HTTPä¸­é—´ä»¶
tower-http = { version = "0.6.2", features = ["trace"] }
tower = { version = "0.5.2", features = ["limit"] }
# å¼‚æ­¥å·¥å…·
tokio-util = { version = "0.7.14", features = ["io"] }
# æ—¶é—´å¤„ç†
chrono = "0.4"
# å‘½ä»¤è¡Œå‚æ•°è§£æ
clap = { version = "4.5", features = ["derive"] }
# æ–‡ä»¶ç¼“å­˜
moka = { version = "0.12.10", features = ["future"] }
```

## ğŸ“Š æ—¥å¿—ç¤ºä¾‹

```
> ./share_these
2025-03-15T19:28:46.760080Z  INFO Server running at http://localhost:3000
2025-03-15T19:28:52.926080Z  INFO File list requested for root directory ip=127.0.0.1
2025-03-15T19:28:53.889118Z  INFO File served: "/Users/Downloads/funny.js" ip=127.0.0.1
2025-03-15T19:29:30.927127Z  INFO Directory listing for: how ip=127.0.0.1
```

## TODO

- [x] æ”¯æŒè‡ªå®šä¹‰ç«¯å£
- [ ] æ”¯æŒè‡ªå®šä¹‰ç›®å½•
- [ ] æ”¯æŒè‡ªå®šä¹‰åˆ†äº«å‡ºå»çš„æ–‡ä»¶ç±»å‹
- [ ] æƒé™æ§åˆ¶ (random token)
- [x] å¾…åˆ†äº«çš„æ–‡ä»¶è½½å…¥å†…å­˜, æ–¹ä¾¿åˆ†äº«ç»™å¤šäºº
- [ ] P2Påˆ†äº« (ä»…å†…ç½‘, ä¸‹è½½å®¢æˆ·ç«¯åè‡ªåŠ¨è§¦å‘åšç§)

## License

MPL-2.0
